<?xml version="1.0" encoding="UTF-8"?>
<odoo noupdate="1">
    <record model="ir.cron" id="cron_invoice_posting">
        <field name="name">Invoices: Generate accounting lines and post</field>
        <field name="active" eval="False" />
        <field name="state">code</field>
        <field name="model_id" ref="account.model_account_move" />
        <field name="code">records = model.search([
  ('state', '=', 'draft'),
  ('date', '&lt;=', datetime.date.today()),
], limit=1000)
for rec in records:
  rec.with_context(check_move_validity=False)._onchange_invoice_line_ids()
  rec.post()</field>
    </record>
</odoo>
